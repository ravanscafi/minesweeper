(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(19)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(3),s=n.n(r),o=(n(14),n(4)),c=n(6),u=n(5),l=n(1),m=n(7),h=(n(15),n(16),function(e){return"*"===e?"mine":null!==e?"revealed number"+e:"unrevealed"});function f(e){return a.a.createElement("button",{className:"Square ".concat(h(e.value)),onClick:e.onClick,onContextMenu:e.onRightClick},e.value?e.value:"")}n(17);var v=function(e,t,n){return a.a.createElement("div",{className:"row",key:t},n.map(function(n,i){return function(e,t,n,i){return a.a.createElement(f,{key:t+"_"+n,value:i,onClick:function(){return e.onClick(t,n)},onRightClick:function(i){return e.onRightClick(i,t,n)}})}(e,t,i,n)}))};function g(e){return a.a.createElement("div",{className:"Board"},e.game.map(function(t,n){return v(e,n,t)}))}n(18);var d=function(e){return e.toString().padStart(3,"0")};function k(e){return a.a.createElement("div",{className:"status"},a.a.createElement("div",{className:"lcd minesLeft"},d(e.minesLeft)),a.a.createElement("button",{className:"restart",onClick:e.onClick},e.buttonStatus),a.a.createElement("div",{className:"lcd timer"},d(e.time)))}var b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).height=9,n.width=9,n.maximumMines=10,n.state=n.getInitialState(),n}return Object(m.a)(t,e),Object(l.a)(t,null,[{key:"randomInRange",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"isMine",value:function(e,t,n){return"*"===e[t][n]}},{key:"generateArray",value:function(e,t,n){return Array.from({length:e},function(){return Array.from({length:t},function(){return n})})}},{key:"getSolution",value:function(e,n,i){return e.map(function(e,a){return e.map(function(e,r){return t.isMine(n,a,r)?i:n[a][r]})})}},{key:"thereAreRemainingMoves",value:function(e,t){return e.flat().filter(function(e){return null===e||"\ud83d\udea9"===e}).length>t}}]),Object(l.a)(t,[{key:"getInitialState",value:function(){return this.stopTimer(),{solution:this.generateGame(this.height,this.width,this.maximumMines),game:t.generateArray(this.height,this.width,null),gameFinished:!1,buttonStatus:"\ud83d\ude42",minesLeft:this.maximumMines,gameStarted:!1,time:0,start:0,bestTime:localStorage.getItem("bestTime")}}},{key:"checkStart",value:function(){this.state.gameStarted||this.startTimer()}},{key:"handleClick",value:function(e,t){var n=this.state.game.slice();this.checkStart(),this.state.gameFinished||null!==n[e][t]||(this.reveal(n,e,t),this.updateGameStatus(n,e,t))}},{key:"handleRightClick",value:function(e,t,n){var i=this.state.game.slice();e.preventDefault(),this.checkStart();var a=i[t][n];if(!(this.state.gameFinished||null!==a&&"\ud83d\udea9"!==a)){i[t][n]=a?null:"\ud83d\udea9";var r=this.state.minesLeft+(i[t][n]?-1:1);this.setState({game:i,minesLeft:r})}}},{key:"reveal",value:function(e,t,n){this.inRange(t,n)&&null===e[t][n]&&(e[t][n]=this.state.solution[t][n],0===e[t][n]&&this.expand(e,t,n))}},{key:"expand",value:function(e,t,n){this.reveal(e,t-1,n),this.reveal(e,t+1,n),this.reveal(e,t,n-1),this.reveal(e,t,n+1),this.reveal(e,t-1,n-1),this.reveal(e,t-1,n+1),this.reveal(e,t+1,n+1),this.reveal(e,t+1,n-1)}},{key:"updateGameStatus",value:function(e,n,i){var a=this;if(t.isMine(e,n,i))return this.stopTimer(),e=e.map(function(e,n){return e.map(function(e,i){var r=t.isMine(a.state.solution,n,i);return"\ud83d\udea9"===e?r?e:"\u274c":r?"*":e})}),this.setState({game:e,gameFinished:!0,buttonStatus:"\ud83d\udc80"});var r=!t.thereAreRemainingMoves(e,this.maximumMines),s=r?"\ud83d\ude0e":this.state.buttonStatus,o=this.state.minesLeft,c=this.state.bestTime;r&&(this.stopTimer(),e=t.getSolution(e,this.state.solution,"\ud83d\udea9"),o=0,c=null===c||this.state.time<c?this.state.time:c),c!==this.state.bestTime&&localStorage.setItem("bestTime",c),this.setState({game:e,gameFinished:r,buttonStatus:s,minesLeft:o,bestTime:c})}},{key:"generateGame",value:function(e,n,i){for(var a,r,s=t.generateArray(e,n,0),o=0;o<i;)a=t.randomInRange(0,e-1),r=t.randomInRange(0,n-1),t.isMine(s,a,r)||(s[a][r]="*",this.incrementMinesNearby(s,a-1,r),this.incrementMinesNearby(s,a+1,r),this.incrementMinesNearby(s,a,r-1),this.incrementMinesNearby(s,a,r+1),this.incrementMinesNearby(s,a-1,r-1),this.incrementMinesNearby(s,a-1,r+1),this.incrementMinesNearby(s,a+1,r+1),this.incrementMinesNearby(s,a+1,r-1),o++);return s}},{key:"incrementMinesNearby",value:function(e,n,i){this.inRange(n,i)&&!t.isMine(e,n,i)&&(e[n][i]=e[n][i]+1)}},{key:"inRange",value:function(e,t){return e>=0&&e<this.height&&t>=0&&t<this.width}},{key:"startTimer",value:function(){var e=this;this.setState({gameStarted:!0,time:this.state.time,start:Date.now()-this.state.time}),this.timer&&this.stopTimer(),this.timer=setInterval(function(){return e.setState({time:Math.floor((Date.now()-e.state.start)/1e3)})},1)}},{key:"stopTimer",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Game"},a.a.createElement("div",{className:"wrapper"},a.a.createElement(k,{buttonStatus:this.state.buttonStatus,minesLeft:this.state.minesLeft,time:this.state.time,onClick:function(){return e.setState(e.getInitialState())}})),a.a.createElement(g,{onClick:function(t,n){return e.handleClick(t,n)},onRightClick:function(t,n,i){return e.handleRightClick(t,n,i)},game:this.state.game}),a.a.createElement("div",{className:"bestScore"},null!==this.state.bestTime?"Best time: "+this.state.bestTime:""))}}]),t}(i.Component),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(a.a.createElement(b,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/minesweeper","/service-worker.js");y?(function(e,t){fetch(e).then(function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):p(e,t)}).catch(function(){console.log("No internet connection found. Game is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):p(t,e)})}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.b3ab0727.chunk.js.map