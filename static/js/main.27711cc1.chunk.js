(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(19)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(7),s=n.n(r),o=(n(15),n(8)),u=n(1),c=n(2),l=n(4),h=n(3),m=n(5);n(16),n(17);function f(e){return a.a.createElement("button",{className:"Square "+("*"===e.value?"mine":null!==e.value?"revealed number"+e.value:"unrevealed"),onClick:e.onClick,onContextMenu:e.onRightClick},e.value?e.value:"")}n(18);var v=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderSquare",value:function(e,t,n){var i=this;return a.a.createElement(f,{key:e+"_"+t,value:n,onClick:function(){return i.props.onClick(e,t)},onRightClick:function(n){return i.props.onRightClick(n,e,t)}})}},{key:"renderRow",value:function(e,t){var n=this;return a.a.createElement("div",{className:"row",key:e},t.map(function(t,i){return n.renderSquare(e,i,t)}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Board"},this.props.game.map(function(t,n){return e.renderRow(n,t)}))}}]),t}(i.Component),d=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).height=9,n.width=9,n.maximumMines=10;var i=n.getInitialState();return i.bestTime=localStorage.getItem("bestTime"),n.state=i,n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getInitialState",value:function(){return this.stopTimer(),{solution:this.generateGame(),game:this.generateArray(null),gameFinished:!1,buttonStatus:"\ud83d\ude42",minesLeft:this.maximumMines,gameStarted:!1,time:0,start:0}}},{key:"checkStart",value:function(){this.state.gameStarted||(this.startTimer(),this.setState({gameStarted:!0}))}},{key:"handleClick",value:function(e,t){var n=this.state.game.slice();this.checkStart(),this.state.gameFinished||null!==n[e][t]||(this.reveal(n,e,t),this.updateGameStatus(n,e,t))}},{key:"handleRightClick",value:function(e,t,n){var i=this.state.game.slice();e.preventDefault(),this.checkStart();var a=i[t][n];if(!(this.state.gameFinished||null!==a&&"\ud83d\udea9"!==a)){i[t][n]=a?null:"\ud83d\udea9";var r=this.state.minesLeft+(i[t][n]?-1:1);this.setState(Object(o.a)({},i,{minesLeft:r}))}}},{key:"reveal",value:function(e,t,n){this.inRange(t,n)&&null===e[t][n]&&(e[t][n]=this.state.solution[t][n],0===e[t][n]&&this.expand(e,t,n))}},{key:"expand",value:function(e,t,n){this.reveal(e,t-1,n),this.reveal(e,t+1,n),this.reveal(e,t,n-1),this.reveal(e,t,n+1),this.reveal(e,t-1,n-1),this.reveal(e,t-1,n+1),this.reveal(e,t+1,n+1),this.reveal(e,t+1,n-1)}},{key:"updateGameStatus",value:function(e,t,n){var i=this;if(this.isMine(e,t,n))return this.stopTimer(),e=e.map(function(e,t){return e.map(function(e,n){var a=i.isMine(i.state.solution,t,n);return"\ud83d\udea9"===e?a?e:"\u274c":a?"*":e})}),this.setState({game:e,gameFinished:!0,buttonStatus:"\ud83d\udc80"});var a=!this.thereAreRemainingMoves(e),r=a?"\ud83d\ude0e":this.state.buttonStatus,s=this.state.minesLeft,o=this.state.bestTime;a&&(this.stopTimer(),e=this.getSolution(e,"\ud83d\udea9"),s=0,o=null===o||this.state.time<o?this.state.time:o),o!==this.state.bestTime&&localStorage.setItem("bestTime",o),this.setState({game:e,gameFinished:a,buttonStatus:r,minesLeft:s,bestTime:o})}},{key:"getSolution",value:function(e,t){var n=this;return e.map(function(e,i){return e.map(function(e,a){return n.isMine(n.state.solution,i,a)?t:n.state.solution[i][a]})})}},{key:"thereAreRemainingMoves",value:function(e){return e.flat().filter(function(e){return null===e||"\ud83d\udea9"===e}).length>this.maximumMines}},{key:"randomInRange",value:function(e,t){return Math.round(Math.random()*(t-e)+e)}},{key:"generateArray",value:function(e){var t=this;return Array.from({length:this.height},function(){return Array.from({length:t.width},function(){return e})})}},{key:"generateGame",value:function(){for(var e,t,n=this.generateArray(0),i=0;i<this.maximumMines;)e=this.randomInRange(0,this.height-1),t=this.randomInRange(0,this.width-1),this.isMine(n,e,t)||(n[e][t]="*",this.incrementSquare(n,e-1,t),this.incrementSquare(n,e+1,t),this.incrementSquare(n,e,t-1),this.incrementSquare(n,e,t+1),this.incrementSquare(n,e-1,t-1),this.incrementSquare(n,e-1,t+1),this.incrementSquare(n,e+1,t+1),this.incrementSquare(n,e+1,t-1),i++);return n}},{key:"incrementSquare",value:function(e,t,n){this.inRange(t,n)&&!this.isMine(e,t,n)&&(e[t][n]=e[t][n]+1)}},{key:"isMine",value:function(e,t,n){return"*"===e[t][n]}},{key:"inRange",value:function(e,t){return e>=0&&t>=0&&e<this.height&&t<this.width}},{key:"startTimer",value:function(){var e=this;this.setState({time:this.state.time,start:Date.now()-this.state.time}),this.timer&&this.stopTimer(),this.timer=setInterval(function(){return e.setState({time:Math.floor((Date.now()-e.state.start)/1e3)})},1)}},{key:"stopTimer",value:function(){clearInterval(this.timer)}},{key:"leftPad",value:function(e){return e.toString().padStart(3,"0")}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"Game"},a.a.createElement("div",{className:"wrapper"},a.a.createElement("div",{className:"status"},a.a.createElement("div",{className:"lcd minesLeft"},this.leftPad(this.state.minesLeft)),a.a.createElement("button",{className:"restart",onClick:function(){return e.setState(e.getInitialState())}},this.state.buttonStatus),a.a.createElement("div",{className:"lcd timer"},this.leftPad(this.state.time)))),a.a.createElement(v,{onClick:function(t,n){return e.handleClick(t,n)},onRightClick:function(t,n,i){return e.handleRightClick(t,n,i)},game:this.state.game}),a.a.createElement("div",{className:"bestScore"},null!==this.state.bestTime?"Best time: "+this.state.bestTime:""))}}]),t}(i.Component),g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(a.a.createElement(d,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/minesweeper","/service-worker.js");g?(function(e,t){fetch(e).then(function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):k(e,t)}).catch(function(){console.log("No internet connection found. Game is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):k(t,e)})}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.27711cc1.chunk.js.map